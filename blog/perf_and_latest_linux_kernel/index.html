<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title> perf and latest linux kernel &middot; Marko Kevac home </title>

  
  <link rel="stylesheet" href="http://mkevac.github.io/kevac.org/css/poole.css">
  <link rel="stylesheet" href="http://mkevac.github.io/kevac.org/css/syntax.css">
  <link rel="stylesheet" href="http://mkevac.github.io/kevac.org/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.ico">

  
  <link href="" rel="alternate" type="application/rss+xml" title="Marko Kevac home" />
</head>

<body>

<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>Marko Kevac home</h1>
      <p class="lead">
      An elegant open source and mobile first theme for <a href="http://hugo.spf13.com">hugo</a> made by <a href="http://twitter.com/mdo">@mdo</a>. Originally made for Jekyll.
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="/">Home</a> </li>
      
    </ul>

    <p>&copy; 2014. All rights reserved. </p>
  </div>
</div>


    <div class="content container">
<div class="post">
  <h1>perf and latest linux kernel</h1>
  <span class="post-date">Fri, May 2, 2014</span>
      

<p>I have being playing today with perf on latest available kernel in Fedora (3.13). These are just some observations and thoughts.</p>

<h2 id="toc_0">perf trace</h2>

<p>This tool is similar to strace, but almost without overhead. Contrary to strace, you can use perf trace to watch syscalls system wide or system calls generated by processes owned by certain user.</p>

<h2 id="toc_1">perf top</h2>

<p>Function names are shown correctly and -g parameter is now available. It means that you can get call traces in a real time (without perf record).</p>

<h2 id="toc_2">perf timechart</h2>

<p>This tool creates cool looking diagrams of a system workload.</p>

<p><img src="http://3.bp.blogspot.com/-8xsIoO22Hiw/U2Pa5R2yQSI/AAAAAAAAFls/1Let5ucfV2o/s1600/Screenshot+from+2014-05-02+21:50:12.png" alt="" />
</p>

<h2 id="toc_3">perf sched</h2>

<p>This tool shows you very verbose system scheduler statistics. Including latencies for a particular process.
You can see if your server wasn&rsquo;t available because of scheduler.</p>

<p>I don&rsquo;t know what for, but perf sched can replay previously recorded system load.
Maybe it is useful for scheduler development and optimization.</p>

<h2 id="toc_4">perf mem</h2>

<p>This tool collects memory requests. It can show you whether your memory request was served by CPU cashe or not for example.</p>

<p><img src="http://1.bp.blogspot.com/-HLz2t-vI4zg/U2PbxzF3_WI/AAAAAAAAFl4/Jwxq1ZMEVAc/s1600/Screenshot+from+2014-05-02+21:40:37.png" alt="" />
</p>

<h2 id="toc_5">perf lock</h2>

<p>This tool presumably allows you to collect information about various locks in your process and in the kernel,
but it&rsquo;s not working on a last Fedora kernel because it lacks particular option:</p>

<pre><code>$ sudo perf lock record -p 12727
tracepoint lock:lock_acquire is not enabled. Are CONFIG_LOCKDEP and CONFIG_LOCK_STAT enabled?
</code></pre>

</div>
</div>

  </body>
</html>
